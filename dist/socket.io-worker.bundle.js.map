{"version":3,"sources":["webpack:///webpack/bootstrap 7a2423c913f640e80fec","webpack:///./socket.io-worker.js","webpack:///./~/eventemitter3/index.js"],"names":["EventEmitter","require","uri","workerUri","events","worker","socket","startWorker","console","log","SharedWorker","port","addEventListener","event","data","type","message","emit","onerror","start","startSocketIo","io","SharedWorkerSocketIO","socketUri","cb","postMessage","eventType","apply","arguments","on","started","e","module","exports","window","wio","has","Object","prototype","hasOwnProperty","prefix","create","EE","fn","context","once","_events","undefined","eventNames","names","name","call","push","slice","getOwnPropertySymbols","concat","listeners","exists","evt","available","i","l","length","ee","Array","a1","a2","a3","a4","a5","len","args","removeListener","j","listener","removeAllListeners","off","addListener","setMaxListeners","prefixed"],"mappings":"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","file":"socket.io-worker.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7a2423c913f640e80fec","'use strict';\n\nconst EventEmitter = require('eventemitter3')\n\nlet uri, workerUri, events, worker, socket = {}\n\nevents = new EventEmitter\n\nfunction startWorker() {\n    console.log('Connecting to SharedWorker', workerUri, uri)\n    worker = new SharedWorker(workerUri, uri)\n    worker.port.addEventListener('message', function (event) {\n        console.log('<< message:', event.data.type, event.data.message)\n        events.emit(event.data.type, event.data.message)\n\n    }, false)\n\n    worker.onerror = function (event) {\n        console.log('worker error', event)\n        events.emit('error', event)\n    }\n\n    worker.port.start()\n}\n \nfunction startSocketIo() {\n    socket = io(uri)\n}\n\nclass SharedWorkerSocketIO \n{\n\n    constructor(socketUri) {\n        console.log('SharedWorkerSocketIO ', socketUri)\n        uri = socketUri\n    }\n\n    emit(event, data, cb) {\n        console.log('>> emit:', event, data, cb)\n        if (worker) {\n            // todo: ack cb\n            worker.port.postMessage({eventType: 'emit', event: event, data: data})\n        } else {\n            socket.emit.apply(this, arguments)\n        }\n    }\n\n    on(event, cb) {\n        console.log('on', event)\n        if (worker) {\n            worker.port.postMessage({eventType: 'on', event: event})\n            events.on(event, cb)\n        } else {\n            socket.on.apply(this, arguments)\n        }\n    }\n\n    start() {\n        this.started = true\n        try {\n            startWorker()\n        } catch(e) {\n            console.log('Could not start shared webwoker', e)\n            startSocketIo()\n        }\n    }\n\n    setWorker(uri) {\n        workerUri = uri\n        if (!this.started) {\n            this.start()\n        }\n    }\n\n}\n\nmodule.exports = window.wio = function(uri) {\n    console.log('wio', uri)\n    return new SharedWorkerSocketIO(uri)\n}\n\n\n// WEBPACK FOOTER //\n// ./socket.io-worker.js","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\n\n//\n// We store our EE objects in a plain object whose properties are event names.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// `~` to make sure that the built-in object properties are not overridden or\n// used as an attack vector.\n// We also assume that `Object.create(null)` is available when the event name\n// is an ES6 Symbol.\n//\nvar prefix = typeof Object.create !== 'function' ? '~' : false;\n\n/**\n * Representation of a single EventEmitter function.\n *\n * @param {Function} fn Event handler to be called.\n * @param {Mixed} context Context for function execution.\n * @param {Boolean} [once=false] Only emit once\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal EventEmitter interface that is molded against the Node.js\n * EventEmitter interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() { /* Nothing to set */ }\n\n/**\n * Hold the assigned EventEmitters by name.\n *\n * @type {Object}\n * @private\n */\nEventEmitter.prototype._events = undefined;\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @api public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var events = this._events\n    , names = []\n    , name;\n\n  if (!events) return names;\n\n  for (name in events) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return a list of assigned event listeners.\n *\n * @param {String} event The events that should be listed.\n * @param {Boolean} exists We only need to know if there are listeners.\n * @returns {Array|Boolean}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event, exists) {\n  var evt = prefix ? prefix + event : event\n    , available = this._events && this._events[evt];\n\n  if (exists) return !!available;\n  if (!available) return [];\n  if (available.fn) return [available.fn];\n\n  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n    ee[i] = available[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Emit an event to all registered event listeners.\n *\n * @param {String} event The name of the event.\n * @returns {Boolean} Indication if we've emitted an event.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events || !this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if ('function' === typeof listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Register a new EventListener for the given event.\n *\n * @param {String} event Name of the event.\n * @param {Function} fn Callback function.\n * @param {Mixed} [context=this] The context of the function.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events) this._events = prefix ? {} : Object.create(null);\n  if (!this._events[evt]) this._events[evt] = listener;\n  else {\n    if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [\n      this._events[evt], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Add an EventListener that's only called once.\n *\n * @param {String} event Name of the event.\n * @param {Function} fn Callback function.\n * @param {Mixed} [context=this] The context of the function.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events) this._events = prefix ? {} : Object.create(null);\n  if (!this._events[evt]) this._events[evt] = listener;\n  else {\n    if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [\n      this._events[evt], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Remove event listeners.\n *\n * @param {String} event The event we want to remove.\n * @param {Function} fn The listener that we need to find.\n * @param {Mixed} context Only remove listeners matching this context.\n * @param {Boolean} once Only remove once listeners.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events || !this._events[evt]) return this;\n\n  var listeners = this._events[evt]\n    , events = [];\n\n  if (fn) {\n    if (listeners.fn) {\n      if (\n           listeners.fn !== fn\n        || (once && !listeners.once)\n        || (context && listeners.context !== context)\n      ) {\n        events.push(listeners);\n      }\n    } else {\n      for (var i = 0, length = listeners.length; i < length; i++) {\n        if (\n             listeners[i].fn !== fn\n          || (once && !listeners[i].once)\n          || (context && listeners[i].context !== context)\n        ) {\n          events.push(listeners[i]);\n        }\n      }\n    }\n  }\n\n  //\n  // Reset the array, or remove it completely if we have no more listeners.\n  //\n  if (events.length) {\n    this._events[evt] = events.length === 1 ? events[0] : events;\n  } else {\n    delete this._events[evt];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners or only the listeners for the specified event.\n *\n * @param {String} event The event want to remove all listeners for.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  if (!this._events) return this;\n\n  if (event) delete this._events[prefix ? prefix + event : event];\n  else this._events = prefix ? {} : Object.create(null);\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/eventemitter3/index.js"],"sourceRoot":""}